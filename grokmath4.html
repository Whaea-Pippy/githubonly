<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Vocabulary Matching Game</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: Arial, sans-serif;
            background: #f0f8ff;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        header {
            background: #333;
            padding: 10px;
            text-align: center;
            color: white;
            position: relative;
        }
        h1 { font-size: 22px; margin: 5px 0; }
        .score-display {
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 10;
        }
        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            padding: 8px 0;
        }
        .nav-btn {
            width: 60px; height: 60px; border-radius: 50%; border: none;
            font-size: 24px; font-weight: bold; color: white; cursor: pointer;
            transition: all 0.2s;
        }
        .nav-btn:hover { transform: scale(1.1); }
        .nav-btn.active { box-shadow: 0 0 15px 4px rgba(255,255,255,0.8); transform: scale(1.15); }

        main { flex: 1; padding: 20px 15px 15px; overflow: hidden; }
        .match-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 100%;
        }
        @media (max-width: 900px) {
            .match-container { grid-template-columns: 1fr; gap: 20px; }
        }
        .column {
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
            padding-right: 10px;
        }
        .match-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: all 0.3s;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.2);
        }
        .match-card.selected {
            border: 4px solid #FFD700;
            box-shadow: 0 0 20px rgba(255,215,0,0.6);
        }
        .match-card.matched {
            background: #4CAF50;
            color: white;
            cursor: default;
        }
        .match-card.wrong {
            background: #FF6B6B;
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .feedback {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            color: #4CAF50;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
            z-index: 5;
        }
        .feedback.show { opacity: 1; }
        footer {
            background: #333; padding: 15px; text-align: center;
        }
        .footer-btn {
            background: white; color: #333; border: none;
            padding: 14px 40px; margin: 0 20px; border-radius: 30px;
            font-size: 20px; cursor: pointer;
            transition: background 0.3s;
        }
        .footer-btn:hover { background: #eee; }
    </style>
</head>
<body>

<header>
    <h1>Math Vocabulary Matching Game</h1>
    <div class="score-display" id="score-display">Score: 0/0</div>
    <div class="nav-buttons">
        <button class="nav-btn active" style="background:#FF6B6B" data-level="1">1</button>
        <button class="nav-btn" style="background:#FF8E53" data-level="2">2</button>
        <button class="nav-btn" style="background:#FFCC00" data-level="3">3</button>
        <button class="nav-btn" style="background:#9ACD32" data-level="4">4</button>
        <button class="nav-btn" style="background:#4CAF50" data-level="5">5</button>
        <button class="nav-btn" style="background:#20B2AA" data-level="6">6</button>
        <button class="nav-btn" style="background:#4682B4" data-level="7">7</button>
        <button class="nav-btn" style="background:#9370DB" data-level="8">8</button>
        <button class="nav-btn" style="background:#DA70D6" data-level="9">9</button>
        <button class="nav-btn" style="background:#FF69B4" data-level="10">10</button>
    </div>
</header>

<main>
    <div class="match-container">
        <div class="column" id="terms-column"></div>
        <div class="column" id="defs-column"></div>
    </div>
    <div class="feedback" id="feedback">Match!</div>
</main>

<footer>
    <button class="footer-btn" id="reset-btn">Reset Level</button>
</footer>

<script>
    const STORAGE_KEY = 'grokmath_scores';
    const ACTIVITY_NAME = 'matching';

    let scores = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
    if (!scores[ACTIVITY_NAME]) scores[ACTIVITY_NAME] = { correct: 0, total: 0 };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(scores));

    function updateScoreDisplay() {
        const s = scores[ACTIVITY_NAME];
        document.getElementById('score-display').textContent = `Score: ${s.correct}/${s.total}`;
    }

    const colors = ['#FF6B6B','#FF8E53','#FFCC00','#9ACD32','#4CAF50','#20B2AA','#4682B4','#9370DB','#DA70D6','#FF69B4'];

    const matchingData = [
        [], // unused
        [ // Level 1
            {term:"Integer",def:"A whole number (positive, negative, or zero)."},
            {term:"Positive",def:"A number greater than zero."},
            {term:"Negative",def:"A number less than zero."},
            {term:"Even",def:"Divisible by 2."},
            {term:"Odd",def:"Not divisible by 2."},
            {term:"Prime",def:"Greater than 1, only factors 1 and itself."},
            {term:"Composite",def:"Greater than 1, has more factors."},
            {term:"Factor",def:"Divides evenly."},
            {term:"Multiple",def:"Product of the number and an integer."},
            {term:"Zero",def:"Additive identity."}
        ],
        // Levels 2â€“10 same as your flashcards data (omitted for brevity â€“ copy from previous)
        // ... (use the same data as before)
    ];

    // Fill in the rest of the levels with your flashcard data
    // For now, duplicating Level 1 for testing â€“ replace with real data
    for (let i = 2; i <= 10; i++) {
        matchingData[i] = matchingData[1].slice();
    }

    let currentLevel = 1;
    let selectedTerm = null;
    let matches = 0;

    const termsColumn = document.getElementById('terms-column');
    const defsColumn = document.getElementById('defs-column');
    const feedback = document.getElementById('feedback');
    const navBtns = document.querySelectorAll('.nav-btn');
    const resetBtn = document.getElementById('reset-btn');

    function shuffle(array) {
        const arr = array.slice();
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    function loadLevel(level) {
        currentLevel = level;
        const color = colors[currentLevel - 1];
        document.body.style.backgroundColor = color + '22';

        termsColumn.innerHTML = '';
        defsColumn.innerHTML = '';
        selectedTerm = null;
        matches = 0;

        const data = matchingData[level];

        const terms = data.map(item => item.term);
        const defs = data.map(item => ({text: item.def, pair: item.term}));

        const shuffledTerms = shuffle(terms);
        const shuffledDefs = shuffle(defs);

        shuffledTerms.forEach(term => {
            const card = document.createElement('div');
            card.className = 'match-card';
            card.textContent = term;
            card.dataset.pair = term;
            card.addEventListener('click', () => selectCard(card, 'term'));
            termsColumn.appendChild(card);
        });

        shuffledDefs.forEach(def => {
            const card = document.createElement('div');
            card.className = 'match-card';
            card.textContent = def.text;
            card.dataset.pair = def.pair;
            card.addEventListener('click', () => selectCard(card, 'def'));
            defsColumn.appendChild(card);
        });

        updateActiveButton();
    }

    function selectCard(card, type) {
        if (card.classList.contains('matched')) return;

        // Clear previous selection
        document.querySelectorAll('.match-card.selected').forEach(c => c.classList.remove('selected'));

        card.classList.add('selected');

        if (type === 'term') {
            selectedTerm = card;
        } else if (selectedTerm) {
            if (selectedTerm.dataset.pair === card.dataset.pair) {
                // Correct match
                selectedTerm.classList.add('matched');
                card.classList.add('matched');
                matches++;

                scores[ACTIVITY_NAME].correct++;
                scores[ACTIVITY_NAME].total++;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(scores));
                updateScoreDisplay();

                feedback.textContent = 'âœ… Correct Match!';
                feedback.classList.add('show');
                setTimeout(() => feedback.classList.remove('show'), 1000);

                if (matches === matchingData[currentLevel].length) {
                    feedback.textContent = 'ðŸŽ‰ All matched! Great job!';
                    feedback.classList.add('show');
                }
            } else {
                // Wrong
                card.classList.add('wrong');
                selectedTerm.classList.add('wrong');
                setTimeout(() => {
                    card.classList.remove('wrong', 'selected');
                    selectedTerm.classList.remove('wrong', 'selected');
                    feedback.textContent = 'âŒ Try again';
                    feedback.classList.add('show');
                    setTimeout(() => feedback.classList.remove('show'), 1000);
                }, 1000);
            }
            selectedTerm = null;
        }
    }

    function updateActiveButton() {
        navBtns.forEach(btn => {
            btn.classList.toggle('active', parseInt(btn.dataset.level) === currentLevel);
        });
    }

    resetBtn.addEventListener('click', () => loadLevel(currentLevel));

    navBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            loadLevel(parseInt(btn.dataset.level));
        });
    });

    updateScoreDisplay();
    loadLevel(1);
</script>
</body>
</html>

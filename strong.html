<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Strength Timer (25 min)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: Poppins, Arial, sans-serif;
    background: #fafafa;
    margin: 0;
    padding: 20px;
  }

  h1, h2 {
    font-weight: 600;
  }

  .exercise-box {
    background: white;
    padding: 16px;
    border-radius: 14px;
    margin-bottom: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  }

  .desc {
    font-size: 14px;
    color: #555;
    margin: 6px 0 12px 0;
  }

  button {
    padding: 12px 18px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    margin: 6px 6px 6px 0;
    cursor: pointer;
  }

  .start-btn { background: #4CAF50; color: white; }
  .next-btn { background: #2196F3; color: white; }
  .complete-btn { background: #8E44AD; color: white; }
  .reset-btn { background: #f44336; color: white; }

  .timer {
    font-size: 22px;
    font-weight: 600;
    margin: 10px 0;
  }

  .bar-wrap {
    width: 100%;
    height: 16px;
    background: #eee;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  .bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #27AE60, #7DCEA0);
    transition: width 0.2s linear;
  }

  .history-box {
    margin-top: 24px;
    background: white;
    padding: 16px;
    border-radius: 14px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  }

  .entry {
    padding: 6px 0;
    border-bottom: 1px solid #ddd;
    font-size: 14px;
  }

  .entry:last-child {
    border-bottom: none;
  }
</style>
</head>
<body>

<h1>Strength Session — 25 Minutes</h1>
<p>Guided pacing with audit history. One continuous bar per exercise.</p>

<div id="app"></div>

<div class="history-box">
  <h2>History</h2>
  <div id="history"></div>
  <button class="reset-btn" onclick="resetHistory()">Reset History</button>
</div>

<script>
// ---- Exercises (in order) ----
const exercises = [
  {name: "Breathe", time: 60, desc: "Slow nose inhale, slow mouth exhale. Prepare body & posture."},
  {name: "Deep Squat", time: 300, desc: "Hold a gentle deep squat. Adjust depth for comfort. Keeps hips, knees, ankles strong."},
  {name: "Squats", time: 120, desc: "Controlled squats. Strengthens legs & hips. Stand tall."},
  {name: "Reverse Lunges", time: 120, desc: "Step back to protect knees. Balance + hip strength."},
  {name: "Side Lunges", time: 120, desc: "Strengthens inner thighs & hips. Smooth side steps."},
  {name: "Push-Ups (Wall/Counter)", time: 120, desc: "Arms + chest + shoulder strength. Adjust angle."},
  {name: "Plank", time: 120, desc: "Core + posture + stability. Keep spine long."},
  {name: "Glute Bridge", time: 120, desc: "Hips up, squeeze glutes. Great for lower back support."},
  {name: "Hip Abduction", time: 120, desc: "Leg lifts to the side. Important fall-prevention muscle."},
  {name: "Calf Raises", time: 120, desc: "Ankles + calves + balance. Slow up and down."},
  {name: "Down-Dog → Plank Flow", time: 120, desc: "Yoga flow: shoulders + core + mobility."},
  {name: "Breathe", time: 60, desc: "Cooling breath, heart rate down, gentle nasal breathing."}
];

let index = 0;
let timer = null;
let remaining = 0;

function render() {
  const ex = exercises[index];
  const app = document.getElementById("app");
  app.innerHTML = `
    <div class="exercise-box">
      <h2>${ex.name}</h2>
      <div class="desc">${ex.desc}</div>
      <div class="timer" id="timer">Time: ${format(ex.time)}</div>
      <div class="bar-wrap"><div id="bar" class="bar"></div></div>
      ${index === 0 ? `<button class="start-btn" onclick="start()">Start</button>` : `<button class="next-btn" onclick="start()">Start</button>`}
    </div>
  `;
}

function start() {
  const ex = exercises[index];
  remaining = ex.time;
  tick();
  timer = setInterval(tick, 1000);
}

function tick() {
  const ex = exercises[index];
  remaining--;
  if (remaining < 0) {
    clearInterval(timer);
    nextExercise();
    return;
  }
  updateUI();
}

function updateUI() {
  const ex = exercises[index];
  const pct = ((ex.time - remaining) / ex.time) * 100;
  document.getElementById("timer").textContent = `Time: ${format(remaining)}`;
  document.getElementById("bar").style.width = pct + "%";
}

function nextExercise() {
  index++;
  if (index >= exercises.length) {
    sessionComplete();
    return;
  }
  render();
}

function sessionComplete() {
  document.getElementById("app").innerHTML = `
    <div class="exercise-box">
      <h2>Session Complete!</h2>
      <p>Total: 25 minutes</p>
      <button class="complete-btn" onclick="logHistory()">Save Day</button>
    </div>
  `;
}

function logHistory() {
  const today = new Date().toLocaleDateString();
  let hist = JSON.parse(localStorage.getItem("strengthHistory")) || [];
  hist.push({date: today, minutes: 25});
  localStorage.setItem("strengthHistory", JSON.stringify(hist));
  loadHistory();
  document.getElementById("app").innerHTML = `<div class="exercise-box"><h2>Saved!</h2></div>`;
}

function loadHistory() {
  let hist = JSON.parse(localStorage.getItem("strengthHistory")) || [];
  const box = document.getElementById("history");
  box.innerHTML = hist.map(h => `<div class="entry">${h.date} → ${h.minutes} min</div>`).join("");
}

function resetHistory() {
  localStorage.removeItem("strengthHistory");
  loadHistory();
}

function format(sec) {
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  return `${m}:${s.toString().padStart(2, "0")}`;
}

loadHistory();
render();
</script>

</body>
</html>
